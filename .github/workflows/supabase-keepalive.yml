  name: Supabase Keep Alive

  on:
    schedule:
      - cron: '0 15 * * *'
    workflow_dispatch:

  jobs:
    ping:
      runs-on: ubuntu-latest
      steps:
        - name: Ping Supabase Database
          run: |
            curl -X GET '${{ secrets.SUPABASE_URL }}/rest/v1/til_entries?limit=1' \
              -H "apikey: ${{ secrets.SUPABASE_KEY }}" \
              -H "Authorization: Bearer ${{ secrets.SUPABASE_KEY }}"

        - name: Log Success
          run: echo "Supabase ping successful at $(date)"
